using NUnit.Framework;
using PhpVH.LexicalAnalysis;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace PhpVH.Tests.Unit.LexicalAnalysis
{
    public static class TokenAssert
    {
        public static void IsValid(TokenPairs pairs)
        {
            var text = string.Join("", pairs.Select(pair => pair.Value).ToArray());
            var lexer = new Lexer(text);
            int index = 0;
            var expected = pairs.Select(pair =>
            {
                var token = new Token(pair.Key, pair.Value, index);
                index += pair.Value.Length;
                return token;
            });
            List<Token> actual = lexer.GetTokens();
            CollectionAssert.AreEqual(expected, actual);
        }

        public static void IsValid(TokenType expectedTokenType, string actualText)
        {
            IsValid(new TokenPairs {
               { TokenType.OpenTag, "<?" },
               { TokenType.WhiteSpace, " " },
               { expectedTokenType, actualText },
               { TokenType.CloseTag, "?>" }
            });
        }

        public static void AreHtmlTokens(string[] texts)
        {
            foreach (string text in texts)
                IsValid(new TokenPairs { { TokenType.Html, text } });
        }
    }
}
