#'Std';

where = @(predicate, list) {
    filtered = [];
    for (element in list) {
        if (predicate(element)) {
            filtered.add(element);
        }
    }
    ret filtered;
};

select = @(selector, list) {
    projected = [];
    for (x in list) x |> selector |> projected.add;
    ret projected;
};

iter = @(action, list) {
    for (x in list) action(x);
};

range(0, 20) 
|> @where(@(x) x % 2 == 0) 
|> @select(@(x) x * x)
|> @iter(print);

square = @(x) x * x;
whereEven = @where(@(x) x % 2 == 0);
selectSquares = @select(square);
printAll = @iter(print);

range(0, 20) 
|> whereEven 
|> selectSquares
|> printAll;




/*
concat = @(x, y) x + y;
fooify = @concat('foo');

for (i = 0; i < 100; i++)
    print(fooify('bar'));


print('hello world');
*/